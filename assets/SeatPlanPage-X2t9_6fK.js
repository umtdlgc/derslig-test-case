import{a as v}from"./apiClient-CRu48vI1.js";import{_ as x,m as S,c as o,a as s,t as i,e as g,d as p,b as w,F as f,r as y,o as r,n as k}from"./index-Cyoi0N2m.js";const _={get(t,e){return v.get(`/seat-plans/${t}/${e}`)}},C={name:"SeatPlanPage",data(){return{seats:[],loading:!1,error:null}},computed:{...S(["selectedSeats","selectedEvent","selectedCategory","totalPrice"]),groupedSeats(){const t={};return this.seats.forEach(e=>{t[e.row]||(t[e.row]={row:e.row,seats:[]}),t[e.row].seats.push(e)}),Object.values(t).forEach(e=>{e.seats.sort((a,u)=>a.seat-u.seat)}),Object.values(t).sort((e,a)=>e.row.localeCompare(a.row))},formatSeats(){return!this.selectedSeats||this.selectedSeats.length===0?"-":this.selectedSeats.filter(t=>t&&t.row&&t.seat).map(t=>`${t.row}${t.seat}`).join(", ")||"-"}},created(){if(!this.selectedEvent||!this.selectedCategory){this.$router.push("/");return}this.fetchSeatPlan()},watch:{"$route.params.categoryId":{immediate:!1,handler(t,e){e&&t!==e&&this.$store.dispatch("setSelectedSeats",[])}}},methods:{async fetchSeatPlan(){this.loading=!0,this.error=null;try{const{eventId:t,categoryId:e}=this.$route.params,a=await _.get(t,e);this.seats=a.data}catch(t){this.error=t.message}finally{this.loading=!1}},toggleSeat(t){t.isBooked||this.$store.dispatch("selectSeat",t)},getSeatClass(t){return t.isBooked?"bg-gray-400 cursor-not-allowed text-white":this.selectedSeats.some(a=>a.id===t.id)?"bg-indigo-600 text-white hover:bg-indigo-700":"bg-gray-200 border-2 border-gray-300 hover:border-indigo-400 hover:bg-gray-100"},goToPayment(){this.selectedSeats.length!==0&&this.$router.push({name:"Payment"})}}},P={class:"seat-plan-page"},j={class:"mb-6"},B={key:0,class:"text-center py-12"},E={key:1,class:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded"},N={key:2},T={class:"bg-white rounded-lg shadow-lg p-8 mb-6"},$={class:"text-gray-600 mb-4"},K={class:"text-gray-700"},V={class:"bg-white rounded-lg shadow-lg p-8"},D={key:0,class:"text-center py-12"},G={class:"overflow-x-auto"},F={class:"inline-block min-w-full"},I={class:"w-12 flex items-center justify-center font-semibold text-gray-700"},O={class:"flex gap-2"},z=["onClick","disabled"],A={class:"bg-white rounded-lg shadow-lg p-6 mt-6"},H={class:"flex justify-between items-center mb-4"},L={class:"text-gray-700"},M={class:"font-bold"},q={class:"text-2xl font-bold text-indigo-600"},J=["disabled"],Q={key:0,class:"text-sm text-gray-600"};function R(t,e,a,u,l,d){var m,h,b;return r(),o("div",P,[s("div",j,[s("button",{onClick:e[0]||(e[0]=n=>t.$router.back()),class:"text-indigo-600 hover:text-indigo-800 font-medium"}," ← Geri Dön ")]),l.loading?(r(),o("div",B,[...e[2]||(e[2]=[s("div",{class:"inline-block animate-spin rounded-full h-12 w-12 border-b-2 border-indigo-600"},null,-1),s("p",{class:"mt-4 text-gray-600"},"Koltuklar yükleniyor...",-1)])])):l.error?(r(),o("div",E,i(l.error),1)):(r(),o("div",N,[s("div",T,[e[4]||(e[4]=s("h1",{class:"text-3xl font-bold text-gray-800 mb-2"},"Koltuk Seçimi",-1)),s("p",$,i((m=t.selectedEvent)==null?void 0:m.title),1),s("p",K,[e[3]||(e[3]=s("span",{class:"font-semibold"},"Kategori:",-1)),g(" "+i((h=t.selectedCategory)==null?void 0:h.name)+" - "+i((b=t.selectedCategory)==null?void 0:b.price)+" ₺ ",1)])]),s("div",V,[e[6]||(e[6]=s("div",{class:"bg-gray-800 text-white text-center py-4 mb-8 rounded"},[s("span",{class:"text-lg font-semibold"},"SAHNE")],-1)),l.seats.length===0&&!l.loading&&!l.error?(r(),o("div",D,[...e[5]||(e[5]=[s("p",{class:"text-gray-500"},"Bu kategori için koltuk bulunmuyor.",-1)])])):p("",!0),s("div",G,[s("div",F,[(r(!0),o(f,null,y(d.groupedSeats,n=>(r(),o("div",{key:n.row,class:"flex justify-center mb-2"},[s("div",I,i(n.row),1),s("div",O,[(r(!0),o(f,null,y(n.seats,c=>(r(),o("button",{key:c.id,onClick:U=>d.toggleSeat(c),disabled:c.isBooked,class:k([d.getSeatClass(c),"w-10 h-10 rounded-md transition duration-200 text-sm font-medium"])},i(c.seat),11,z))),128))])]))),128))])]),e[7]||(e[7]=w('<div class="mt-8 flex justify-center gap-6 text-sm"><div class="flex items-center gap-2"><div class="w-8 h-8 bg-gray-200 border-2 border-gray-300 rounded"></div><span>Müsait</span></div><div class="flex items-center gap-2"><div class="w-8 h-8 bg-indigo-600 text-white rounded flex items-center justify-center">✓</div><span>Seçili</span></div><div class="flex items-center gap-2"><div class="w-8 h-8 bg-gray-400 rounded"></div><span>Dolu</span></div></div>',1))]),s("div",A,[s("div",H,[s("div",null,[s("p",L,[e[8]||(e[8]=g("Seçili Koltuk Sayısı: ",-1)),s("span",M,i(t.selectedSeats.length),1)]),s("p",q,"Toplam: "+i(t.totalPrice)+" ₺",1)]),s("button",{onClick:e[1]||(e[1]=(...n)=>d.goToPayment&&d.goToPayment(...n)),disabled:t.selectedSeats.length===0,class:"bg-indigo-600 text-white font-semibold py-3 px-8 rounded-lg hover:bg-indigo-700 transition disabled:bg-gray-400 disabled:cursor-not-allowed"}," Ödemeye Geç ",8,J)]),t.selectedSeats.length>0?(r(),o("div",Q,[e[9]||(e[9]=s("span",{class:"font-medium"},"Seçili koltuklar:",-1)),g(" "+i(d.formatSeats),1)])):p("",!0)])]))])}const Y=x(C,[["render",R]]);export{Y as default};
