import{f as c,e as g}from"./date-BM3ULZ6-.js";import{_ as v,c as r,d as m,a as t,t as i,e as a,w as u,v as h,F as p,r as b,o as l}from"./index-Cz-_8iPr.js";import"./apiClient-CRu48vI1.js";const f={name:"EventDetailPage",data(){return{event:null,selectedCategory:null,loading:!1,error:null}},watch:{"$route.params.id":{immediate:!0,handler(n,e){e&&n!==e&&this.$store.dispatch("clearBooking"),this.fetchEvent()}}},methods:{async fetchEvent(){this.loading=!0,this.error=null;try{const n=this.$route.params.id,e=await g.getById(n);this.event=e.data}catch(n){this.error=n.message}finally{this.loading=!1}},goToSeatSelection(){this.selectedCategory&&(this.$store.dispatch("setSelectedSeats",[]),this.$store.dispatch("setSelectedEvent",this.event),this.$store.dispatch("setSelectedCategory",this.selectedCategory),this.$router.push({name:"SeatPlan",params:{eventId:this.event.id,categoryId:this.selectedCategory.id}}))},formatEventDate:c}},y={class:"event-detail-page"},x={key:0,class:"text-center py-12"},_={key:1,class:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded"},k={key:2,class:"bg-white rounded-lg shadow-lg overflow-hidden"},S=["src","alt"],w={class:"p-8"},C={class:"text-4xl font-bold text-gray-800 mb-4"},E={class:"mb-6"},B={class:"text-gray-700 mb-2"},D={class:"text-gray-600 text-sm mb-4"},T={class:"text-gray-700"},K={class:"mb-6"},V={class:"text-gray-600 leading-relaxed"},I={class:"border-t pt-6"},N={class:"mb-6"},P=["value"],F=["disabled"];function M(n,e,j,z,s,d){return l(),r("div",y,[s.loading?(l(),r("div",x,[...e[2]||(e[2]=[t("div",{class:"inline-block animate-spin rounded-full h-12 w-12 border-b-2 border-indigo-600"},null,-1),t("p",{class:"mt-4 text-gray-600"},"Etkinlik yükleniyor...",-1)])])):s.error?(l(),r("div",_,i(s.error),1)):s.event?(l(),r("div",k,[t("img",{src:s.event.image_url,alt:s.event.title,class:"w-full h-96 object-cover"},null,8,S),t("div",w,[t("h1",C,i(s.event.title),1),t("div",E,[t("p",B,[e[3]||(e[3]=t("span",{class:"font-semibold"},"Mekan:",-1)),a(" "+i(s.event.venue.name),1)]),t("p",D,i(s.event.venue.address),1),t("p",T,[e[4]||(e[4]=t("span",{class:"font-semibold"},"Tarih:",-1)),a(" "+i(d.formatEventDate(s.event.event_date)),1)])]),t("div",K,[e[5]||(e[5]=t("h2",{class:"text-2xl font-semibold text-gray-800 mb-3"},"Açıklama",-1)),t("p",V,i(s.event.description),1)]),t("div",I,[e[8]||(e[8]=t("h2",{class:"text-2xl font-semibold text-gray-800 mb-4"},"Kategori Seçin",-1)),t("div",N,[e[7]||(e[7]=t("label",{class:"block text-gray-700 text-sm font-bold mb-2"}," Bilet Kategorisi ",-1)),u(t("select",{"onUpdate:modelValue":e[0]||(e[0]=o=>s.selectedCategory=o),class:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500"},[e[6]||(e[6]=t("option",{value:null,disabled:""},"Kategori seçiniz...",-1)),(l(!0),r(p,null,b(s.event.event_categories,o=>(l(),r("option",{key:o.id,value:o},i(o.name)+" - "+i(o.price)+" ₺ ",9,P))),128))],512),[[h,s.selectedCategory]])]),t("button",{onClick:e[1]||(e[1]=(...o)=>d.goToSeatSelection&&d.goToSeatSelection(...o)),disabled:!s.selectedCategory,class:"w-full bg-indigo-600 text-white font-semibold py-3 px-6 rounded-lg hover:bg-indigo-700 transition disabled:bg-gray-400 disabled:cursor-not-allowed"}," Koltuk Seçimine Geç ",8,F)])])])):m("",!0)])}const U=v(f,[["render",M]]);export{U as default};
